(()=>{var e={};e.id=823,e.ids=[823],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56621:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(86345).UU)("https://gixljpbqbqbjdsilhvrl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpeGxqcGJxYnFiamRzaWxodnJsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0MjU3NzAsImV4cCI6MjA2MzAwMTc3MH0.udlwuwJSlqv5rVqOtA9XSlKpTjUZLxo0qL4YPVrh4H4")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},86391:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>q,routeModule:()=>x,serverHooks:()=>j,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>v});var s={};r.r(s),r.d(s,{DELETE:()=>m,GET:()=>d,POST:()=>p,PUT:()=>c});var o=r(96559),i=r(48088),n=r(37719),a=r(32190),u=r(56621);async function d(e){let{searchParams:t}=new URL(e.url),r=t.get("videoId");if(r){let{data:e,error:t}=await u.N.from("comments").select("*").eq("video_id",r),{data:s,error:o}=await u.N.from("videos").select("*").eq("id",r).single();return t||o?a.NextResponse.json({error:t?.message||o?.message},{status:500}):a.NextResponse.json({comments:e,video:s})}let{data:s,error:o}=await u.N.from("comments").select("*"),{data:i,error:n}=await u.N.from("videos").select("*");return o||n?a.NextResponse.json({error:o?.message||n?.message},{status:500}):a.NextResponse.json({comments:s,videos:i})}async function p(e){try{let t=await e.json(),{data:r,error:s}=await u.N.from("videos").select("id").eq("id",t.videoId).single();if(s||!r)return a.NextResponse.json({error:"Video not found"},{status:404});let o={text:t.text,timestamp:t.timestamp,video_id:t.videoId},{data:i,error:n}=await u.N.from("comments").insert(o).select().single();if(n)return console.error("Database error:",n),a.NextResponse.json({error:n.message},{status:500});if(!i)return a.NextResponse.json({error:"Failed to create comment"},{status:500});return a.NextResponse.json({id:i.id,text:i.text||"",timestamp:i.timestamp||0,video_id:i.video_id},{status:201})}catch{return a.NextResponse.json({error:"Invalid request"},{status:400})}}async function c(e){try{let t=await e.json(),{data:r,error:s}=await u.N.from("videos").update(t).eq("id",t.id).select().single();if(s)return a.NextResponse.json({error:s.message},{status:500});if(!r)return a.NextResponse.json({error:"Video not found"},{status:404});return a.NextResponse.json(r)}catch{return a.NextResponse.json({error:"Invalid request"},{status:400})}}async function m(e){try{let{id:t}=await e.json(),{error:r}=await u.N.from("videos").delete().eq("id",t);if(r)return a.NextResponse.json({error:r.message},{status:500});return a.NextResponse.json({message:"Video deleted"})}catch{return a.NextResponse.json({error:"Invalid request"},{status:400})}}let x=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/video/route",pathname:"/api/video",filename:"route",bundlePath:"app/api/video/route"},resolvedPagePath:"C:\\Users\\Admin\\Desktop\\Education\\Education-App\\src\\app\\api\\video\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:v,serverHooks:j}=x;function q(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:v})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,345],()=>r(86391));module.exports=s})();