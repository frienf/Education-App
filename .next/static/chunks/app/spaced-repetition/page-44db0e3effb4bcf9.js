(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{414:(e,t,r)=>{"use strict";function s(e,t){let r=e.ease,s=e.interval,a=!0;"hard"===t?(r=Math.max(1.3,e.ease-.3),s=1,a=!1):"good"===t?(r=e.ease,s=e.interval*e.ease):"easy"===t&&(r=e.ease+.3,s=e.interval*e.ease*1.3);let i=new Date;return i.setDate(i.getDate()+Math.round(s)),{interval:s,ease:r,nextReview:i.toISOString(),isCorrect:a}}r.d(t,{C:()=>s})},760:(e,t,r)=>{"use strict";r.d(t,{N:()=>g});var s=r(5155),a=r(2115),i=r(869),n=r(2885),o=r(7494),d=r(845),l=r(7351),c=r(1508);class u extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,l.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:r,anchorX:i}=e,n=(0,a.useId)(),o=(0,a.useRef)(null),d=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,a.useContext)(c.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:a,right:c}=d.current;if(r||!o.current||!e||!t)return;o.current.dataset.motionPopId=n;let u=document.createElement("style");return l&&(u.nonce=l),document.head.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===i?"left: ".concat(a):"right: ".concat(c),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.contains(u)&&document.head.removeChild(u)}},[r]),(0,s.jsx)(u,{isPresent:r,childRef:o,sizeRef:d,children:a.cloneElement(t,{ref:o})})}let f=e=>{let{children:t,initial:r,isPresent:i,onExitComplete:o,custom:l,presenceAffectsLayout:c,mode:u,anchorX:f}=e,x=(0,n.M)(p),m=(0,a.useId)(),v=!0,g=(0,a.useMemo)(()=>(v=!1,{id:m,initial:r,isPresent:i,custom:l,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;o&&o()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[i,x,o]);return c&&v&&(g={...g}),(0,a.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[i]),a.useEffect(()=>{i||x.size||!o||o()},[i]),"popLayout"===u&&(t=(0,s.jsx)(h,{isPresent:i,anchorX:f,children:t})),(0,s.jsx)(d.t.Provider,{value:g,children:t})};function p(){return new Map}var x=r(2082);let m=e=>e.key||"";function v(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let g=e=>{let{children:t,custom:r,initial:d=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:u="sync",propagate:h=!1,anchorX:p="left"}=e,[g,w]=(0,x.xQ)(h),b=(0,a.useMemo)(()=>v(t),[t]),y=h&&!g?[]:b.map(m),j=(0,a.useRef)(!0),N=(0,a.useRef)(b),R=(0,n.M)(()=>new Map),[C,k]=(0,a.useState)(b),[E,D]=(0,a.useState)(b);(0,o.E)(()=>{j.current=!1,N.current=b;for(let e=0;e<E.length;e++){let t=m(E[e]);y.includes(t)?R.delete(t):!0!==R.get(t)&&R.set(t,!1)}},[E,y.length,y.join("-")]);let S=[];if(b!==C){let e=[...b];for(let t=0;t<E.length;t++){let r=E[t],s=m(r);y.includes(s)||(e.splice(t,0,r),S.push(r))}return"wait"===u&&S.length&&(e=S),D(v(e)),k(b),null}let{forceRender:P}=(0,a.useContext)(i.L);return(0,s.jsx)(s.Fragment,{children:E.map(e=>{let t=m(e),a=(!h||!!g)&&(b===E||y.includes(t));return(0,s.jsx)(f,{isPresent:a,initial:(!j.current||!!d)&&void 0,custom:r,presenceAffectsLayout:c,mode:u,onExitComplete:a?void 0:()=>{if(!R.has(t))return;R.set(t,!0);let e=!0;R.forEach(t=>{t||(e=!1)}),e&&(null==P||P(),D(N.current),h&&(null==w||w()),l&&l())},anchorX:p,children:e},t)})})}},3068:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5155),a=r(8124),i=r(7168),n=r(8482),o=r(6408),d=r(760),l=r(2115),c=r(6671);function u(){let{cardsDue:e,reviewCard:t}=(0,a.o)(),[r,u]=(0,l.useState)(0),[h,f]=(0,l.useState)(!1),[p,x]=(0,l.useState)(!1);if(0===e.length||r>=e.length)return null;let m=e[r],v=async e=>{try{x(!0),await t(m.id,e),"hard"===e?c.oR.error("Keep practicing!"):"good"===e?c.oR.success("Well done!"):c.oR.success("Excellent!"),setTimeout(()=>{f(!1),u(e=>e+1),x(!1)},500)}catch(e){console.error("Error reviewing card:",e),c.oR.error("Failed to save review. Please try again."),x(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(o.P.div,{className:"w-80",animate:{rotateY:180*!!h},transition:{duration:.6},style:{perspective:1e3},children:(0,s.jsxs)(n.Zp,{className:"h-48 cursor-pointer transition-shadow hover:shadow-lg ".concat(p?"pointer-events-none":""),onClick:()=>!p&&f(!h),children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:h?"Answer":"Question"})}),(0,s.jsx)(n.Wu,{className:"flex items-center justify-center h-full",children:(0,s.jsx)("p",{className:"text-lg text-center",children:h?m.back:m.front})})]})}),(0,s.jsx)(d.N,{children:h&&!p&&(0,s.jsxs)(o.P.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,s.jsx)(i.$,{variant:"destructive",onClick:()=>v("hard"),className:"min-w-20",children:"Hard"}),(0,s.jsx)(i.$,{variant:"default",onClick:()=>v("good"),className:"min-w-20",children:"Good"}),(0,s.jsx)(i.$,{variant:"secondary",onClick:()=>v("easy"),className:"min-w-20",children:"Easy"})]})})]})}function h(){let{cards:e,cardsDue:t}=(0,a.o)(),r=e.reduce((e,t)=>e+(t.reviews||0),0),i=e.reduce((e,t)=>e+(t.correctReviews||0),0),o=r>0?(i/r*100).toFixed(1):"0.0";return(0,s.jsxs)(n.Zp,{className:"mb-6",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Review Statistics"})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Total Cards"}),(0,s.jsx)("p",{children:e.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Cards Due"}),(0,s.jsx)("p",{children:t.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Total Reviews"}),(0,s.jsx)("p",{children:r})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Accuracy"}),(0,s.jsxs)("p",{children:[o,"%"]})]})]})})]})}var f=r(9852),p=r(414);function x(){let{cardsDue:e,addCard:t,fetchCards:r}=(0,a.o)(),[d,x]=(0,l.useState)(""),[m,v]=(0,l.useState)(""),[g,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{r()},[r]);let b=async()=>{if(!d.trim()||!m.trim())return void c.oR.error("Please fill in both question and answer fields");try{w(!0);let e=(0,p.C)({id:Date.now().toString(),front:d,back:m,interval:1,ease:2.5,nextReview:new Date().toISOString(),reviews:0,correctReviews:0,difficulty:"medium"},"good");await t({front:d,back:m,nextReview:e.nextReview,interval:e.interval,ease:e.ease,difficulty:"medium"}),c.oR.success("Card added successfully!"),x(""),v("")}catch(e){console.error("Error adding card"),c.oR.error("Failed to add card. Please try again.")}finally{w(!1)}},y=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())};return(0,s.jsxs)(o.P.div,{className:"container mx-auto p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Spaced Repetition Flashcards"}),(0,s.jsx)(h,{}),(0,s.jsxs)(n.Zp,{className:"p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Card"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)(f.p,{placeholder:"Front (Question)",value:d,onChange:e=>x(e.target.value),onKeyPress:y,className:"flex-1",disabled:g}),(0,s.jsx)(f.p,{placeholder:"Back (Answer)",value:m,onChange:e=>v(e.target.value),onKeyPress:y,className:"flex-1",disabled:g}),(0,s.jsx)(i.$,{onClick:b,className:"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",disabled:g,children:g?"Adding...":"Add Card"})]})]}),(0,s.jsxs)(n.Zp,{className:"p-6 ",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Review Cards"}),0===e.length?(0,s.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No cards due for review."}):(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:[e.length," card",1!==e.length?"s":""," due for review"]}),(0,s.jsx)(u,{})]})]})]})}},3794:(e,t,r)=>{Promise.resolve().then(r.bind(r,3068))},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>o});var s=r(5155);r(2115);var a=r(9708),i=r(2085),n=r(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:i,asChild:d=!1,...l}=e,c=d?a.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(o({variant:r,size:i,className:t})),...l})}},8124:(e,t,r)=>{"use strict";r.d(t,{o:()=>i});var s=r(5453),a=r(414);let i=(0,s.v)(e=>({cards:[],cardsDue:[],fetchCards:async()=>{try{let t=await fetch("/api/spaced-repetition"),r=await t.json();e({cards:r,cardsDue:r.filter(e=>new Date(e.nextReview)<=new Date)})}catch(e){console.error("Failed to fetch flashcards:",e)}},addCard:async t=>{try{let r=await fetch("/api/spaced-repetition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await r.json();e(e=>{let t=[...e.cards,s],r=t.filter(e=>new Date(e.nextReview)<=new Date);return{cards:t,cardsDue:r}})}catch(e){throw console.error("Failed to add flashcard:",e),e}},reviewCard:async(t,r)=>{try{let s=(await i.getState()).cards.find(e=>e.id===t);if(!s)return;let{interval:n,ease:o,nextReview:d,isCorrect:l}=(0,a.C)(s,r),c={...s,interval:n,ease:o,nextReview:d,reviews:s.reviews+1,correctReviews:l?s.correctReviews+1:s.correctReviews},u=await fetch("/api/spaced-repetition",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),h=await u.json();e(e=>{let r=e.cards.map(e=>e.id===t?h:e),s=r.filter(e=>new Date(e.nextReview)<=new Date);return{cards:r,cardsDue:s}})}catch(e){throw console.error("Failed to review flashcard:",e),e}},deleteCard:async t=>{try{await fetch("/api/spaced-repetition",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}),e(e=>({cards:e.cards.filter(e=>e.id!==t),cardsDue:e.cardsDue.filter(e=>e.id!==t)}))}catch(e){throw console.error("Failed to delete flashcard:",e),e}}}))},8482:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>n});var s=r(5155);r(2115);var a=r(9434);function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2596),a=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(5155);r(2115);var a=r(9434);function i(e){let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}}},e=>{var t=t=>e(e.s=t);e.O(0,[352,628,671,441,684,358],()=>t(3794)),_N_E=e.O()}]);